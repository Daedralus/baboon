<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Disney Princess Day — Paris Reveal</title>
<style>
  :root{ --bg:#fff7f4; --card:#ffffffe6; --accent:#c83a3a }
  html,body{height:100%;}
  body { font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; margin:0; padding:24px; display:flex; align-items:center; justify-content:center; background:var(--bg); color:#222 }
  .frame{ width:100%; max-width:480px; background:transparent; border-radius:12px; overflow:hidden; box-shadow:0 12px 30px rgba(20,10,8,0.08); }
  .map-wrap{ position:relative; background:transparent; }
  #map { display:block; width:100%; height:auto; border-radius:8px; transition: opacity 0.5s ease; }
  .photo-indicator{ position:absolute; top:10px; right:10px; background:rgba(0,0,0,0.7); color:white; padding:4px 8px; border-radius:12px; font-size:0.8rem; }

  .content{ padding:18px; background:transparent; }
  .card{ background:var(--card); border-radius:10px; padding:14px 16px; margin:12px 0; box-shadow:0 6px 18px rgba(30,15,10,0.06); opacity:0; transform:translateY(8px); transition:all 420ms ease; }
  .card.show{ opacity:1; transform:none; }
  .stage-title{ font-weight:600; margin-bottom:6px; }
  .small{ font-size:0.92rem; color:#444 }
  .controls{ display:flex; gap:8px; justify-content:center; padding:12px; }
  button{ background:#fff; border:1px solid #eee; padding:10px 14px; border-radius:9px; font-weight:600; cursor:pointer }
  button.primary{ background:var(--accent); color:white; border:none }

</style>
</head>
<body>
  <div class="frame" role="main">
    <div class="map-wrap">
      <img id="map" src="photos/paris/Path1.png" alt="Paris travel path map">
      <div class="photo-indicator" id="photoIndicator">Path 1/6</div>
    </div>

    <div class="content" id="contentArea">
      <div class="card" id="intro">
        <div class="stage-title">Paris — A day for us</div>
        <div class="small">This page will reveal the next moment for Saturday, November 8, 2025 (Paris time). When the real clock passes the moment, the next chapter appears automatically.</div>
      </div>
    </div>

    <div class="controls">
      <button id="manualBtn">Reveal Next</button>
      <button id="testBtn">Show All (test)</button>
    </div>
  </div>

<script>
// Stage data (Paris local times) - ISO with CET offset (+01:00)
const stages = [
  { time: '2025-11-08T10:30:00+01:00', title: 'Croissant Class', note:'10:30 — 12:30', photo: 'Path1.png' },
  { time: '2025-11-08T12:30:00+01:00', title: 'Marais Mini-stroll & Coffee', note:'12:30 — 13:05', photo: 'Path2.png' },
  { time: '2025-11-08T13:30:00+01:00', title: 'Musée Vivant du Fromage — Île Saint-Louis', note:'13:30 — 15:00', photo: 'Path3.png' },
  { time: '2025-11-08T15:00:00+01:00', title: 'Notre Dame Walk', note:'15:00 — 15:45', photo: 'Path4.png' },
  { time: '2025-11-08T15:40:00+01:00', title: 'To The Boat!', note:'15:45-16:30', photo: 'Path4.png' },
  { time: '2025-11-08T16:30:00+01:00', title: 'Eiffel Arrival — Golden Hour + Shopping', note:'16:30-19:00', photo: 'Path5.png' },
  { time: '2025-11-08T19:00:00+01:00', title: 'Dinner at Le Petit Cler', note:'19:00-21:00', photo: 'Path6.png' },
  { time: '2025-11-08T21:00:00+01:00', title: 'End of Day', note:'21:00-00:00', photo: 'Path7.png' }
];

let revealed = -1;
const content = document.getElementById('contentArea');
const manualBtn = document.getElementById('manualBtn');
const testBtn = document.getElementById('testBtn');
const mapImg = document.getElementById('map');
const photoIndicator = document.getElementById('photoIndicator');

// Initialize with first photo
mapImg.src = 'photos/paris/Path1.png';
mapImg.alt = 'Croissant class - Travel path map';
photoIndicator.textContent = 'Path 1/6';

// Helper: get current Paris time as a Date object
function nowInParis(){
  try{
    const fmt = new Intl.DateTimeFormat('en-GB', { timeZone: 'Europe/Paris', year:'numeric', month:'2-digit', day:'2-digit', hour:'2-digit', minute:'2-digit', second:'2-digit', hour12:false });
    const parts = fmt.formatToParts(new Date());
    const map = {};
    parts.forEach(p=> map[p.type]=p.value);
    const iso = `${map.year}-${map.month}-${map.day}T${map.hour}:${map.minute}:${map.second}+01:00`;
    return new Date(iso);
  }catch(e){
    // fallback to local time (best-effort)
    return new Date();
  }
}

function createCard(stageIndex){
  const s = stages[stageIndex];
  const card = document.createElement('div');
  card.className='card show';
  const title = document.createElement('div'); title.className='stage-title'; title.textContent = s.title;
  const note = document.createElement('div'); note.className='small'; note.textContent = s.note;
  card.appendChild(title); card.appendChild(note);
  content.appendChild(card);
  
  // Update map photo to current stage
  updateMapPhoto(stageIndex);
}

function updateMapPhoto(stageIndex) {
  const s = stages[stageIndex];
  if (s.photo) {
    mapImg.style.opacity = '0.5';
    setTimeout(() => {
      mapImg.src = `photos/paris/${s.photo}`;
      mapImg.alt = `${s.title} - Travel path map`;
      photoIndicator.textContent = `Path ${stageIndex + 1}/6`;
      mapImg.style.opacity = '1';
    }, 250);
  }
}

function checkAuto(){
  const now = nowInParis();
  for(let i=0;i<stages.length;i++){
    const t = new Date(stages[i].time);
    if(now >= t && i > revealed){
      revealed = i;
      createCard(i);
    }
  }
}

// manual interaction
manualBtn.addEventListener('click', ()=>{
  const next = Math.min(revealed+1, stages.length-1);
  if(next > revealed){ revealed = next; createCard(next); }
});

// test button shows all (for rehearsal)
testBtn.addEventListener('click', ()=>{
  for(let i=0;i<stages.length;i++){
    if(i>revealed){ revealed=i; createCard(i); }
  }
});

// initial run: show intro then run auto-check every 10s
checkAuto();
setInterval(checkAuto, 10000);

// Accessibility: allow keyboard reveal
document.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') manualBtn.click(); });
</script>
</body>
</html>
